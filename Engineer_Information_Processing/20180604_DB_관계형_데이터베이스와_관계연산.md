데이터베이스 실무 응용
=================
관계형 데이터베이스와 관계연산
-----------------------
## 목차
  1. [관계형 데이터 모델]()
  2. [키의 개념 및 종류]()
  3. [무결성]()
  4. [관계대수]()

### 관계형 데이터 모델
***관계형 데이터 모델은 데이터를 테이블 또는 릴레이션의 구조로 표현하는 논리적 데이터모델***

#### 관계형 데이터 구조 : 릴레이션
* 관계형 데이터 모델에서는 데이터를 <u>원자값으로 갖는 이차원의 테이블</u>로 표현하는데 이를 <u>릴레이션</u>이라 함 => 그냥 테이블이라 생각하면 됨
* 릴레이션의 구조는 논리적인 구조를 의미한다 => 다양한 정렬기준을 통해 릴레이션을 표현
* 릴레이션 구조 = 릴레이션 스키마 + 릴레이션 인스턴스로 구성
* 릴레이션의 열을 속성이라하고 행을 튜플이라함
* 하나의 속성이 취할 수 있는 같은 타입의 원자값들의 집합을 도메인이라함 => 그냥 데이터의 범위  
![](http://cfile1.uf.tistory.com/image/2374C041571C8D8303E54F)

#### ER 모델을 관계형 데이터모델로 변환
* 매핑 룰 : ER모델을 릴레이션 스키마로 변환하는 것  
* 속성은 컬럼으로 식별자는 기본키로 표현, 릴레이션 간의 관계는 기본키와 이를 참조하는 외래키를 이용하여 표현  
* 개체간의 관계에 따라 관계형 데이터 모델에서 릴레이션 스키마로 변환하는 과정은 다르다
  * 개체 A,B는 각각의 독립적인 릴레이션 A,B로 표현한다. ER도형에서의 각 개체의 속성들은 각 릴레이션의 속성들로 정의, <U>기본키는 밑줄을 그어 표시</U>
  * 1:1 관계라면,
    * ***A의 기본키를 릴레이션 B의 외래키로 추가하거나***
    * ***B의 기본키를 릴레이션 A의 외래키로 추가하여 표현***
  * 1:N 관계라면,
    * ***A의 기본키를 B의 외래키로 추가하여 표현***
  * N:M 관계라면
    * ***A와 B의 기본키를 모두 포함한 별도의 릴레이션으로 표현***
    * 이 때 생성된 별도의 릴레이션을 **교차 릴레이션, 교차 엔티티** 라고 부름
* 상위 개체 A와 하위 개체 B,C가 ISA관계로 이루어진 ER모델은 다음과같은방법을 이용하여 릴레이션 스키마로 변환
  * ***A 릴레이션의 기본키를 B,C 릴레이션의 외래키로 추가 => 3개의 릴레이션이 생성***
  * ***A가 가지고 있는 속성과 B,C가 갖고있는 속성을 결합하여 표현 => A 속성을 포함하고 있는 B,C 두 개의 릴레이션이 생성***
* 릴레이션 스키마의 정보공학적 표기기호
  ![](http://postfiles13.naver.net/20160925_76/aroaroro_1474742687721xRVVK_PNG/%B5%A5%C0%CC%C5%CD_%B8%F0%B5%A8%B8%B59.png?type=w2)  
* 식별관계 / 비식별 관계
  * 식별관계 : A,B사이의 관계에서 A의 기본키가 B의 외래키면서 동시의 기본키가 되는 관계
  * 비식별관계 : A,B사이의 관계에서 A의 기본키가 B의 비기본키들중 외래키가 되는 관계

### 키의 개념 및 종류
키란 데이터베이스에서 조건에 만족하는 튜플을 찾거나 순서대로 정렬할 떄 기준이 되는 속성
* 키의 종류
  * 슈퍼키
    * 릴레이션 내에 있는 속성들의 집합으로 구성된 키
    * <u>유일성은 만족, 최소성은 만족시키지 못함</u>
  * 후보키
    * 튜플을 유일하게 식별하기 위해 사용되는 ***속성들의 부분집합***
    * <u>유일성과 최소성을 만족</u>
  * 기본키
    * 후보키 중에서 특별히 선정된 키로 ***중복된 값을 가질 수 없음***
    * 후보키의 성질을 가짐, **유일성과 최소성을 만족**
    * <u>NULL값을 가질 수 없다</u>
  * 대체키
    * 후보키 중에서 선정된 **기본키를 제외한 나머지 후보키**
  * 외래키
    * ***다른 릴레이션의 기본키를 참조하는 속성 또는 속성들의 집합***
    * <u>릴레이션 간의 관계를 표현할 때 사용</u>
    * 한 릴레이션에 속한 속성 A와 참조 릴레이션의 기본키인 B가 동일한 도메인 상에서 정의될 때, 속성 A를 외래키라고 함
    * 참조 릴레이션의 기본키와 동일한 키 속성을 가짐

### 무결성
데이터베이스에 저장된 데이터 값과 그것이 표현하는 현실 세계의 실제 값이 일치하는 정확성
* 무결성의 종류
  * NULL 무결성 : 릴레이션의 특정 속성 값이 <u>NULL이 될 수 없음</u>
  * 고유 무결성 : 특정 속성에 대해 각 **튜플이 갖는 속성값들이 서로 달라야함 => 기본키**
  * 도메인 무결성 : 특정 속성의 값이 그 속성에 정의된 도메인에 속해야함
  * 키 무결성 : 하나의 릴레이션에는 <u>적어도 하나의 키가 존재해야함</u>
  * 관계 무결성 : 튜플의 삽입 가능 여부 또는 두 릴레이션에 있는 튜플간의 관계에 대한 적절성  
  * 참조 무결성 : **외래키값은 NULL이거나 참조 릴레이션의 기본키값과 동일해야함**  
  * 개체 무결성 : **기본키를 구성하는 어떤 속성도 NULL일 수 없음**

### 관계대수
관계형 데이터베이스에서 원하는 정보와 그 정보를 어떻게 유도하는가를 기술하는 절차적 언어  
하나 또는 두 개의 릴레이션을 입력으로 받아들여 결과로서 새로운 릴레이션을 생성해내는 연산들의 집합  
SELECT,PROJECT,JOIN... 같은 연산자들이 있음
* 연산자 종류
  * SELECT
    * 릴레이션에 존재한느 튜플들 중에서 **특정 조건을 만족하는 튜플들** 의 부분집합을 구하여 새로운 릴레이션을 만듦
    * 기본형 : **σ~(조건)~(R)**
    * 조건에서는 등호 부등호를 사용한 비교연산이 허용됨, 또한 ^ v ㄱ 등의 논리연산자를 사용해 여러개의 조건을 하나로 결합 가능
  * PROJECT
    * 특정 **속성값만 추출** 하여 새로운 릴레이션을 만듦, 속성값이 중복되면 중복제거
    * 기본형 : **π~(속성리스트)~(R)**
  * JOIN
    * ***2개의 릴레이션을 하나로 합쳐서 새로운 릴레이션을 만듦***
    * JOIN연산의 결과로 만들어진 릴레이션의 차수는 조인된 두 릴레이션의 차수를 합한 것과 같음
    * 기본형 : **R⋈~(조인조건)~S**
    * 비교연산자를 Θ로 일반화하여 Θ로 표현될 수 있는 조인을 세타 조인이라함
    * JOIN조건이 = 일때 동일 속성이 두번나타나는데, 이 중 ***<u>중복된 속성을 제거하여 같은 속성은 1번만 나타나게 하는 연산을 자연 조인이라함</u>***
  * DIVISION
    * 기본형 : R(속성r / 속성s)S
    
